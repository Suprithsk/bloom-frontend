@import '@/styles/mixins.scss';
@import '@/styles/variables.scss';

.products-wrap {
    border-radius: 0;
    margin-bottom: 0; // Remove bottom margin
    position: relative;
    transition: all 0.7s;
    background: $white;
    height: 100%; // Full height
    
    .card-details {
        padding: 12px; // Reduced padding
        height: 100%; // Full height
        display: flex;
        flex-direction: column;
        
        @include mediaquery(tabletLarge-view) {
            overflow: hidden;
            padding: 16px; // Reduced
        }
        
        @include mediaquery(desktop-view) {
            height: calc(100vh - 200px); // Adjusted height
        }
        
        &:hover {
            overflow-y: auto;
        }
        
        // Scrollbar styles - unchanged
        &::-webkit-scrollbar-button {
            width: 100px;
            height: 100px;
        }
        
        &::-webkit-scrollbar {
            height: 6px;
            width: 6px;
        }
        
        &::-webkit-scrollbar-track {
            border-radius: 5px;
            background-color: #DFE9EB;
        }
        
        &::-webkit-scrollbar-track:hover {
            background-color: #B8C0C2;
        }
        
        &::-webkit-scrollbar-track:active {
            background-color: #B8C0C2;
        }
        
        &::-webkit-scrollbar-thumb {
            border-radius: 5px;
            background-color: $dashboard-bg;
        }
        
        &::-webkit-scrollbar-thumb:hover {
            background-color: $dashboard-bg;
        }
        
        &::-webkit-scrollbar-thumb:active {
            background-color: #62A34B;
        }
        
        @-moz-document url-prefix() {
            & {
                scrollbar-width: thin; 
                scrollbar-color: $dashboard-bg #ebebeb; 
            }
        }
    }
    
    h2 {
        margin-bottom: 12px; // Reduced
        font-family: 'helvetica-bold', sans-serif;
        color: $dashboard-bg;
        @include fontsize(18px); // Reduced font size
    }
    
    .side-btn {
        display: none;
        
        @include mediaquery(desktop-view) {
            display: block;
            width: 32px; // Smaller
            height: 32px;
            position: absolute;
            top: 12px; // Adjusted position
            right: -16px;
            background-color: $btn;
            border-radius: 50%;
            z-index: 3;
            transition: 0.5s;
            cursor: pointer;
            border: none;
            
            .btn-icon {
                background: url('../../assets/images/drop-down.svg') no-repeat center;
                transform: rotate(90deg);
                display: inline-block;
                width: 12px; // Smaller
                height: 8px;
                filter: brightness(0) saturate(100%) invert(99%) sepia(85%) saturate(230%) hue-rotate(259deg) brightness(115%) contrast(100%);        
            }
        }
        
        &.hide {
            transform: rotate(180deg);
        }
    }
    
    .product-category {
        display: flex;
        gap: 0.5rem; // Reduced gap
        margin-bottom: 1rem; // Reduced
        align-items: stretch;
        flex-wrap: wrap;
        
        .product-btn {
            padding: 6px 12px; // Smaller padding
            border: 1px solid $coupon-br;
            border-radius: 6px;
            background-color: $white;
            color: $dashboard-bg;
            cursor: pointer;
            transition: all 0.3s;
            font-family: 'helvetica-regular', sans-serif;
            @include fontsize(12px); // Smaller font
            min-width: auto;
            
            &:hover {
                border-color: $btn;
                color: $btn;
            }
            
            &.active {
                background-color: $btn;
                color: $white;
                border-color: $btn;
            }
        }
    }
    
    .product-list {
        display: grid;
        grid-template-columns: 1fr; // Single column for sidebar
        gap: 12px; // Reduced gap
        flex: 1; // Take remaining space
        overflow-y: auto;
        
        @include mediaquery(mobile-view) {
            grid-template-columns: repeat(2, 1fr); // Two columns on mobile
        }
    }
    
    .product-catalog {
        flex: 1;
        overflow-y: auto;
        
        .loading-state {
            text-align: center;
            padding: 1rem;
            color: $dashboard-bg;
        }
        
        .item-img {
            border-radius: 8px; // Smaller radius
            width: 100%;
            height: 120px; // Reduced height
            position: relative;
            margin-bottom: 8px; // Reduced margin
            background-color: $input-bg;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            
            img {
                max-width: 100%;
                max-height: 100px; // Reduced
                width: 100%;
                height: 100%;
                object-fit: cover;
            }
        }
        
        .product-item {
            border-radius: 8px; // Smaller radius
            padding: 12px; // Reduced padding
            border: 1px solid $coupon-br;
            position: relative;
            background: $white;
            transition: all 0.3s;
            
            &:hover {
                border-color: $btn;
                box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            }
            
            h3 {
                margin-bottom: 6px; // Reduced
                font-family: 'helvetica-bold', sans-serif;
                @include fontsize(14px); // Smaller font
                color: $dashboard-bg;
                line-height: 1.3;
            }
            
            p {
                margin-bottom: 0.5rem;
                @include fontsize(12px); // Smaller font
                color: #6B7280;
            }
            
            &.active {
                .product-btn {
                    border: 1px solid $btn;
                    color: $btn;
                    background-color: $white;
                }
                
                &.selected {
                    .product-btn {
                        background-color: $btn;
                        color: $white;
                        position: relative;
                        z-index: 3;
                    }
                    
                    .overlay {
                        position: fixed;
                        top: 0;
                        right: 0;
                        left: 0;
                        bottom: 0;
                        background-color: rgba(0, 0, 0, 0.5);
                        border-radius: 12px;
                        z-index: 2;
                    }
                }
            }
        }
        
        .texture-list {
            display: flex;
            gap: 6px; // Reduced gap
            margin-top: 8px;
            overflow-x: auto;
            padding-bottom: 4px;
        }
        
        .texture-item {
            flex-shrink: 0;
            border: 1px solid #ccc;
            border-radius: 4px;
            overflow: hidden;
            cursor: pointer;
            transition: all 0.3s;
            
            &:hover {
                border-color: $btn;
                transform: translateY(-1px);
            }
        }
        
        .texture-thumbnail {
            display: block;
            width: 40px; // Smaller
            height: 40px;
            object-fit: cover;
        }
        
        .fabric-details {
            margin-bottom: 12px; // Reduced
            display: flex;
            align-items: center;
            gap: 2px;
            
            .fabric-type {
                border-radius: 50%;
                width: 20px; // Smaller
                height: 20px;
                margin-right: 4px;
                padding: 1px;
                
                img {
                    width: 100%;
                    border-radius: 50%;
                }
                
                &.active {
                    border: 1px solid $warn-green;
                }
            }
        }
        
        .product-btn {
            width: 100%;
            padding: 8px 12px; // Smaller padding
            background-color: $btn;
            color: $white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s;
            font-family: 'helvetica-bold', sans-serif;
            @include fontsize(12px); // Smaller font
            
            &:hover {
                background-color: darken($btn, 10%);
                transform: translateY(-1px);
            }
            
            &.import-model {
                margin-bottom: 6px;
            }
        }
        
        // No models state
        .create-modal-card-block {
            text-align: center;
            padding: 1.5rem;
            border: 2px dashed $coupon-br;
            border-radius: 12px;
            background: $input-bg;
            
            .create-img {
                margin-bottom: 1rem;
                
                .no-models-icon {
                    color: #9CA3AF;
                    opacity: 0.6;
                }
            }
            
            .create-modal-card-heading {
                margin-bottom: 0.5rem;
                @include fontsize(18px); // Smaller
                font-family: 'helvetica-bold', sans-serif;
                color: $dashboard-bg;
            }
            
            .create-modal-description {
                margin-bottom: 1.5rem;
                @include fontsize(12px); // Smaller
                color: #6B7280;
            }
            
            .create-model-btn {
                padding: 10px 20px; // Smaller
                background-color: $btn;
                color: $white;
                border: none;
                border-radius: 6px;
                cursor: pointer;
                font-family: 'helvetica-bold', sans-serif;
                @include fontsize(14px); // Smaller
                transition: all 0.3s;
                
                &:hover {
                    background-color: ($btn, 10%darken);
                    transform: translateY(-1px);
                }
            }
        }
    }
    
    &.hide {
        width: 0;
        padding: 2px;
        
        .card-details {
            padding: 0;
        }
    }
    
    @include mediaquery(desktop-view) {
        border-radius: 12px;
        width: 100%; // Full width instead of fixed
        max-width: 380px; // Max width constraint
        margin-bottom: 0;
        flex: none;
        padding: 0;
    }
}